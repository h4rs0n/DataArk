import{_ as b,d as v,c as h,o as g,a,n as C,b as S,g as I,e as m,i as z,l as y,f as r,w as u,j as $,B as V,h as B,ar as f,u as P,ap as q,aq as M,k as U}from"./index-BDJWZuA5.js";import{F as O,a as W}from"./index-mnO6W4_j.js";/* empty css              */import{I as F,a as R}from"./index-BK-QrwgQ.js";const T=v({name:"IconLock",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const t=I("icon"),n=m(()=>[t,`${t}-lock`,{[`${t}-spin`]:e.spin}]),i=m(()=>{const s={};return e.size&&(s.fontSize=z(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:n,innerStyle:i,onClick:s=>{o("click",s)}}}}),D=["stroke-width","stroke-linecap","stroke-linejoin"],E=a("rect",{x:"7",y:"21",width:"34",height:"20",rx:"1"},null,-1),H=a("path",{d:"M15 21v-6a9 9 0 1 1 18 0v6M24 35v-8"},null,-1),J=[E,H];function Z(e,o,t,n,i,l){return g(),h("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:S(e.cls),style:C(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...s)=>e.onClick&&e.onClick(...s))},J,14,D)}var _=b(T,[["render",Z]]);const A=Object.assign(_,{install:(e,o)=>{var t;const n=(t=o==null?void 0:o.iconPrefix)!=null?t:"";e.component(n+_.name,_)}}),G=v({name:"IconUser",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const t=I("icon"),n=m(()=>[t,`${t}-user`,{[`${t}-spin`]:e.spin}]),i=m(()=>{const s={};return e.size&&(s.fontSize=z(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:n,innerStyle:i,onClick:s=>{o("click",s)}}}}),K=["stroke-width","stroke-linecap","stroke-linejoin"],Q=a("path",{d:"M7 37c0-4.97 4.03-8 9-8h16c4.97 0 9 3.03 9 8v3a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3Z"},null,-1),X=a("circle",{cx:"24",cy:"15",r:"8"},null,-1),Y=[Q,X];function ee(e,o,t,n,i,l){return g(),h("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:S(e.cls),style:C(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...s)=>e.onClick&&e.onClick(...s))},Y,14,K)}var k=b(G,[["render",ee]]);const te=Object.assign(k,{install:(e,o)=>{var t;const n=(t=o==null?void 0:o.iconPrefix)!=null?t:"";e.component(n+k.name,k)}}),j=e=>(q("data-v-67a2fd18"),e=e(),M(),e),oe={class:"login-page"},se={class:"login-card"},ne=j(()=>a("h1",{class:"title"},"登录",-1)),re=j(()=>a("div",{class:"actions"},null,-1)),ie=v({__name:"LoginView",setup(e){const o=y(),t=y({username:"",password:"",remember:!0}),n={username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]},i=P();function l(){o.value.validate(async s=>{if(!s)try{const d=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value.username,password:t.value.password})})).json();d.Code==="1"?(f.success("登录成功"),localStorage.setItem("token",d.Data.token),i.push("/")):f.error(d.Message||"登录失败")}catch{f.error("网络错误或服务器异常")}})}return(s,c)=>{const d=F,w=W,L=R,x=V,N=O;return g(),h("div",oe,[a("div",se,[ne,r(N,{ref_key:"formRef",ref:o,model:t.value,rules:n,layout:"vertical",onSubmit:l},{default:u(()=>[r(w,{field:"username",label:"用户名"},{default:u(()=>[r(d,{modelValue:t.value.username,"onUpdate:modelValue":c[0]||(c[0]=p=>t.value.username=p),placeholder:"请输入用户名"},{prefix:u(()=>[r($(te))]),_:1},8,["modelValue"])]),_:1}),r(w,{field:"password",label:"密码"},{default:u(()=>[r(L,{modelValue:t.value.password,"onUpdate:modelValue":c[1]||(c[1]=p=>t.value.password=p),placeholder:"请输入密码"},{prefix:u(()=>[r($(A))]),_:1},8,["modelValue"])]),_:1}),re,r(x,{type:"primary",long:"",class:"login-btn",onClick:l},{default:u(()=>[B(" 登录 ")]),_:1})]),_:1},8,["model"])])])}}}),de=U(ie,[["__scopeId","data-v-67a2fd18"]]);export{de as default};
